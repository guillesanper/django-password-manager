{% extends "base.html" %}
{% load static %}

{% block content %}
<!-- Begin Page Content -->
<div class="container-fluid">

  <!-- Page Heading -->
  <h1 class="h3 mb-2 text-gray-800">Generador de Contraseñas</h1>
  <p class="mb-4">Aquí puedes generar contraseñas seguras para usar en tus cuentas.</p>

  <div class="card-body">
    <button class="btn btn-primary btn-warning" onclick="location.reload();">Regenerate</button>
    <div class="table-responsive">
      <table class="table table-bordered" width="100%" cellspacing="0">
        <thead>
          <tr>
            <th>#</th>
            <th>Password</th>
            <th>Copiar</th>
          </tr>
        </thead>
        <tbody>
          {% for password in passwords %}
          <tr>
            <td>{{ forloop.counter }}</td>
            <td><span id="password-{{ forloop.counter }}">{{ password }}</span></td>
            <td>
              <button class="btn btn-sm btn-primary" onclick="copyToClipboard('password-{{ forloop.counter }}')">Copy</button>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

</div>

<script>
function copyToClipboard(elementId) {
  var text = document.getElementById(elementId).textContent;
  var tempInput = document.createElement("input");
  tempInput.value = text;
  document.body.appendChild(tempInput);
  tempInput.select();
  document.execCommand("copy");
  document.body.removeChild(tempInput);
  alert("Password copied to clipboard!");
}
</script>
{% endblock %}
